<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:t="http://tapestry.apache.org/schema/tapestry_5_3.xsd" xmlns:p="tapestry:parameter">
<t:content>
    <div id="questionPreview" class="row">
        <h3>${question.questionInfo.name}</h3>
        <blockquote>
            <p class="text-lg">${question.text}</p>
            <t:if test="question.image">
                <img src="${imageLink}" class="question-image"/>
            </t:if>
        </blockquote>
    </div>
    <div class="row">
        <div class="col-sm-8 col-sm-offset-4">
            <t:delegate to="questionBlock"/>
        </div>
    </div>

<!--    check how to work open question -->
    <t:if test="questionOpen">
        <t:zone t:id="checkOpenZone" id="checkOpenZone">
            <t:form t:id="checkOpenForm" class="form-horizontal" async="true">
                <div class="form-group">
                    <t:label for="openAnswerText" class="col-sm-3"/>
                    <div class="col-sm-5">
                        <t:textfield value="openAnswerText" t:id="openAnswerText"/>
                    </div>
                    <div class="col-sm-4">
                        <t:if test="resultDefined">
                            <t:if test="correct">
                                <span class="text-success">${message:correct}</span>
                                <p:else><span class="text-danger">${message:incorrect}</span> </p:else>
                            </t:if>
                        </t:if>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-sm-5 col-sm-offset-3">
                        <t:submit value="${message:checkCorrectness}"/>
                    </div>
                </div>
            </t:form>
        </t:zone>
    </t:if>

    <t:block t:id="questionSimple" id="questionSimple">
        <ul>
            <t:loop source="simpleAnswers" value="answer">
                <li>
                    <t:if test="answer.correct">
                        <span class="alert-success">${answer.text}</span>
                        <p:else>${answer.text}</p:else>
                    </t:if>
                </li>
            </t:loop>
        </ul>
    </t:block>
    <t:block t:id="questionSimpleOrder" id="questionSimpleOrder">
        <ul>
            <t:loop source="simpleAnswers" value="answer">
                <li>
                    <t:if test="answer.correct">
                        <span class="alert-success">${answer.text} (${answer.sequenceOrder})</span>
                        <p:else>${answer.text}</p:else>
                    </t:if>
                </li>
            </t:loop>
        </ul>
    </t:block>
    <t:block t:id="questionOpen" id="questionOpen">
        <ul>
            <t:loop source="simpleAnswers" value="answer">
                <li><span class="alert-success">${answer.readableText}</span></li>
            </t:loop>
        </ul>
    </t:block>

    <t:block t:id="questionCorrespondence" id="questionCorrespondence">
        <dl>
            <t:loop source="correspondenceVariants" value="correspondence">
                <dt>${correspondence.text}
                    <t:if test="correspondence.image">
                        <img src="${correspondenceImageLink}"/>
                    </t:if>
                </dt>
                <dd>
                    <ul>
                        <t:loop source="correspondence.correctAnswers" value="answer">
                            <li class="alert-success">${answer.text}</li>
                        </t:loop>
                    </ul>
                </dd>
            </t:loop>
        </dl>
        <ul>
            <t:loop source="simpleAnswers" value="answer">
                <li>${answer.text}</li>
            </t:loop>
        </ul>
    </t:block>
    <t:block t:id="questionTree" id="questionTree">
        <dl>
            <t:loop source="correspondenceVariants" value="correspondence">
                <dt>${correspondence.text}
                    <t:if test="correspondence.image">
                        <img class="question-image" src="${correspondenceImageLink}"/>
                    </t:if>
                </dt>
                <dd>
                    <ul>
                        <t:loop source="correspondence.correctAnswers" value="answer">
                            <li>
                                <t:if test="answer.correct">
                                    <span class="alert-success">${answer.text}</span>
                                    <p:else>${answer.text}</p:else>
                                </t:if>
                            </li>
                        </t:loop>
                    </ul>
                </dd>
            </t:loop>
        </dl>
    </t:block>
    <t:block t:id="questionTreeOpen" id="questionTreeOpen">
        <dl>
            <t:loop source="correspondenceVariants" value="correspondence">
                <dt>${correspondence.text}
                    <t:if test="correspondence.image">
                        <img class="question-image" src="${correspondenceImageLink}"/>
                    </t:if>
                </dt>
                <dd>
                    <ul>
                        <t:loop source="correspondence.correctAnswers" value="answer">
                            <li><span class="alert-success">${answer.readableText}</span></li>
                        </t:loop>
                    </ul>
                </dd>
            </t:loop>
        </dl>
    </t:block>
</t:content>
</html>