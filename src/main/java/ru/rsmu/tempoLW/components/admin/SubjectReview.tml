<!DOCTYPE html>
<t:container xmlns="http://www.w3.org/1999/xhtml" xmlns:t="http://tapestry.apache.org/schema/tapestry_5_3.xsd" xmlns:p="tapestry:parameter">

    <div id="subjectReview">
        <div class="row">
            <h4>${subject.title}</h4>
        </div>
        <div class="row">
            <div class="col-sm-10">
                <ul class="list-group">
                    <li class="list-group-item">
                        <span class="badge">${languageName}</span>
                        ${message:subject-basic-language}
                    </li>
                    <li class="list-group-item">
                        <span class="badge">${subjectLevel}</span>
                        ${message:subject-type}
                    </li>
                    <li class="list-group-item">
                        <span class="badge">
                            <t:if test="subject.showAnswersQuantity">
                                <span class="glyphicon glyphicon-ok" aria-hidden="true"/>
                                <p:else>
                                    <span class="glyphicon glyphicon-minus" aria-hidden="true"/>
                                </p:else>
                            </t:if>
                        </span>
                        ${message:subject-show-answers-quantity}
                    </li>
                    <li class="list-group-item">
                        <span class="badge">
                            <t:if test="subject.useCalculator">
                                <span class="glyphicon glyphicon-ok" aria-hidden="true"/>
                                <p:else>
                                    <span class="glyphicon glyphicon-minus" aria-hidden="true"/>
                                </p:else>
                            </t:if>
                        </span>
                        ${message:subject-use-calculator}
                    </li>
                    <t:if test="referenceMaterialsPresent">
                        <li class="list-group-item">
                            ${message:reference-materials}
                            <div style="padding-top: 1em;">
                                <t:loop source="subject.referenceMaterials" value="referenceMaterial">
                                    <div class="row">
                                        <div class="col-sm-11">${referenceMaterial.title}</div>
                                        <!--                                    <div class="col-sm-1">${topic.questionsCount}</div>-->
                                    </div>
                                </t:loop>
                            </div>
                        </li>
                    </t:if>

                    <li class="list-group-item">
                        <span class="badge">${questionsCount}</span>
                        ${message:review-total-questions}
                    </li>
                    <li class="list-group-item">
                        <span class="badge">${topicsCount}</span>
                        ${message:review-topics}
                        <div style="padding-top: 1em;">
                            <t:loop source="topics" value="topic">
                                <div class="row">
                                    <div class="col-sm-11">${topic.title}</div>
                                    <div class="col-sm-1">${topic.questionsCount}</div>
                                </div>
                            </t:loop>
                        </div>
                    </li>
                </ul>
            </div>


            <!-- stats here -->
        </div>

        <t:security.hasanyroles roles="admin,subject_admin">
        <div class="row">
            <h5>${message:review-testing-plans}</h5>
            <div class="col-sm-10">
                <ul class="list-group">
                    <t:loop source="plans" value="plan">
                        <li class="list-group-item">
                            <t:if test="plan.enabled">
                                <span class="badge"><span class="glyphicon glyphicon-ok"/></span>
                            </t:if>
                            <t:pagelink page="admin/testingplan/testingplanedit" context="plan">${plan.name}</t:pagelink>
                        </li>
                    </t:loop>
                    <li class="list-group-item">
                        <t:pagelink page="admin/testingplan/testingplancreate" context="subject" class="btn btn-primary">${message:review-create-new-plan}</t:pagelink>
                    </li>
                </ul>
            </div>
        </div>
        </t:security.hasanyroles>

        <div class="row">
            <t:security.hasanyroles roles="admin,subject_admin">
                <t:eventlink class="btn btn-primary" event="toUpdate" context="subjectId">${message:review-update}</t:eventlink>
                <t:eventlink class="btn btn-primary" event="toUpload" context="subjectId">${message:review-upload-questions}</t:eventlink>
                <t:pagelink class="btn btn-primary" page="admin/exportquestions" context="subject">${message:review-download-questions}</t:pagelink>
                <t:pagelink class="btn btn-primary" page="admin/question/questioncreate" context="subject">${message:create-new-question}</t:pagelink>
            </t:security.hasanyroles>
<!--            <t:pagelink page="admin/previewquestion" class="btn btn-primary" context="[subject,0]">${message:review-preview-questions}</t:pagelink>-->
            <t:pagelink page="admin/question/questionlist" class="btn btn-primary" context="subject">${message:review-preview-questions}</t:pagelink>

            <!-- delete -->
        </div>
    </div>

</t:container>
