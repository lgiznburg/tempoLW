<html t:type="layout" t:pageTitle="${message:appeal-pagetitle}"
      xmlns:t="http://tapestry.apache.org/schema/tapestry_5_3.xsd"
      xmlns:p="tapestry:parameter">
<body>

<div class="row align-content-center"><h3>${message:appeal-pagetitle}</h3></div>

<div class="row">
    <div class="col-sm-5 col-sm-offset-1">${message:exam-header} <b>${exam.testingPlan.subject.title}</b></div>
        <div class="col-sm-5">
            ${message:examDate-label}: <b><t:output format="literal:dd MMMM yyyy" value="exam.examDate"/> <t:output format="literal: HH:mm:ss" value="examResult.startTime"/> - <t:output format="literal: HH:mm:ss" value="examResult.endTime"/></b>
        </div>
</div>
<div class="row">
    <div class="col-sm-5 col-sm-offset-1">
        ${message:testee-name}
        <t:security.hasanyroles roles="admin,subject_admin">
            <b>${testee.fullName}</b>
        </t:security.hasanyroles>
        <t:security.hasrole role="teacher">****</t:security.hasrole>
    </div>
        <div class="col-sm-5">${message:final-mark} <b>${examResult.markTotal}</b></div>
</div>
<br/>
<div class="row">
    <div class="col-sm-4" >
        <br/>
        <t:zone t:id="questionListZone">
            <t:grid source="resultsDataSource" t:id="resultsGrid" rowsPerPage="10" pagerPosition="bottom"
                    row="questionResult" exclude="id,score,scoreCost,orderNumber,updated,answered,answeredCount"
                    add="title" reorder="viewNumber,title,mark">
                <p:titleCell>
                    <t:if test="activeRow">
                            ${questionResult.question.questionInfo.name}
                        <p:else>
                            <t:eventlink event="questionSelect" context="questionResult" >
                                ${questionResult.question.questionInfo.name}
                            </t:eventlink>
                        </p:else>
                    </t:if>
                </p:titleCell>
                <p:markCell>
                    <strong>${questionResult.mark}</strong> (${questionMax})
                </p:markCell>
            </t:grid>
        </t:zone>
    </div>

    <div class="col-sm-7 col-sm-offset-1">
        <t:zone t:id="resultViewZone">
            <t:admin.appeal.resultview current="resultForView"/>
        </t:zone>
    </div>
</div>
<div class="row">
    <div class="form-group">
        <div class="col-sm-4 col-sm-offset-4">
            <t:security.hasanyroles roles="admin,subject_admin">
                <t:pagelink page="admin/appealstatement" context="[exam,testee]" class="btn btn-success"
                            aria-label="Print">
                    ${message:appeal-statement}
                </t:pagelink>
            </t:security.hasanyroles>
            <t:pagelink page="admin/exams" parameters="queryParams" class="btn btn-default">${message:back}</t:pagelink>
        </div>
    </div>
</div>

</body>

</html>