<html t:type="layout" t:pageTitle="${message:testwizard-pagetitle}"
      xmlns:t="http://tapestry.apache.org/schema/tapestry_5_3.xsd"
      xmlns:p="tapestry:parameter"><!-- Тестирование -->

<t:if test="useProctoring">
    <script src="${proctoringJS}"></script>
</t:if>
<div class="row">
    <h2 class="align-center">
        <t:if test="examResult.examMode">
            ${message:exam-header} <p:else>${message:testing-header}</p:else>
        </t:if>
        ${examResult.title}</h2>
    <t:if test="examResult.examMode">
        <h4>${examResult.testee.lastName}</h4>
    </t:if>
        <t:eventlink t:id="refreshExamTimingZone" async="true" style="display: none;">Hidden Refresh Link</t:eventlink>
    <t:zone t:id="examTimingZone" id="examTimingZone">
        <t:if test="examResult.examMode">
            <t:if test="examResult.startTime">
                <p class="text-lg">
                    ${message:exam-start} : <strong><t:output format="literal:dd/MM HH:mm" value="examResult.startTime"/></strong> -
                    ${message:exam-end} :
                    <t:if test="examResult.finished">
                        <strong><t:output format="literal:dd/MM HH:mm" value="examResult.endTime"/></strong>
                        <p:else>
                            <strong><t:output format="literal:dd/MM HH:mm" value="estimatedEndTime"/></strong>
                        </p:else>
                    </t:if>
                </p>
            </t:if>
        </t:if>
        <p class="text-lg">${message:current-time} : <strong><t:output format="literal:HH:mm" value="currentServerTime"/></strong></p>
    </t:zone>
</div>

<t:zone t:id="questionFormZone" id="questionFormZone">

    <t:delegate to="mainBlock"/>

</t:zone>

<t:block t:id="questionBlock">
    <t:questionform current="current"/>
    <t:if test="uploadMessage">
        <div class="row">
            <div class="col-sm-6 offset-1"><span class="text-danger">${uploadMessage}</span></div>
        </div>
    </t:if>
    <div class="row subquestion-nav">
        <ul class="pager">
            <li class="previous">
                <t:if test="prevExist">
                    <t:eventlink event="prevQuestion" async="true"><span aria-hidden="true">&larr;</span> ${message:prev-question}</t:eventlink>
                    <p:else>
                        <a name="prev"><span aria-hidden="true">&larr;</span> ${message:prev-question}</a>
                    </p:else>
                </t:if>
            </li>
            <li>
                <!--<t:pagelink page="testfinal">${message:to-questions-list}</t:pagelink>-->
                <t:eventlink event="toQuestionList" async="true">${message:to-questions-list}</t:eventlink>
            </li>
            <li class="next">
                <t:if test="nextExist">
                    <t:eventlink event="nextQuestion" async="true" >${message:next-question} <span aria-hidden="true">&rarr;</span></t:eventlink>
                    <p:else>
                        <a name="next">${message:next-question} <span aria-hidden="true">&rarr;</span></a>
                    </p:else>
                </t:if>
            </li>
        </ul>
    </div>

</t:block>

<t:block t:id="questionListBlock">
    <t:questiontable/>
</t:block>

<t:block t:id="startProctoring">
    <div class="row">
        <t:eventlink event="startTimer" async="true" class="btn btn-primary">${message:start-exam}</t:eventlink>
    </div>
</t:block>

<t:block t:id="needToReload">
    <div class="panel panel-danger">
        <div class="panel-heading">
            <h3 class="panel-title">${message:unexpected-error}</h3>
        </div>
        <div class="panel-body">
            <t:outputraw value="${message:unexpected-error-explain}"/><br/><br/>
            <t:pagelink page="index" >${message:navbar.logotitle}</t:pagelink>
        </div>
    </div>

</t:block>
</html>