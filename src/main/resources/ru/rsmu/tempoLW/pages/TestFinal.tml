<html t:type="layout" t:pageTitle="Тестирование"
      xmlns:t="http://tapestry.apache.org/schema/tapestry_5_3.xsd"
      xmlns:p="tapestry:parameter">

<h2 class="align-center">Тестирование: ${testResult.testingPlan.subject.title} (${testResult.testingPlan.name})</h2>

<div class="row">
    <div class="col-sm-2 col-sm-offset-4">Баллы</div>
</div>

<t:loop source="testResult.questionResults" value="questionResult">
    <div class="row">
    <t:if test="testResult.finished" >
        <div class="col-sm-8">Вопрос № ${questionResult.viewNumber}. ${questionResult.question.questionInfo.name}</div>
        <div class="col-sm-2">${questionResult.score}</div>

        <p:else>
            <div class="col-sm-8">
                <t:pagelink page="testwizard" context="questionResult.orderNumber">Вопрос № ${questionResult.viewNumber}. ${questionResult.question.questionInfo.name}</t:pagelink>
            </div>
            <div class="col-sm-2">
                <t:if test="questionResult.answered">
                    <span class="glyphicon glyphicon-ok"></span>
                    <p:else>
                        <span class="glyphicon glyphicon-remove"></span>
                    </p:else>
                </t:if>
            </div>
        </p:else>
    </t:if>
    </div>
</t:loop>


<t:if test="testResult.finished">
    <div class="row">
        <div class="col-sm-8">Общая оценка</div>
        <div class="col-sm-2">${testResult.markTotal}</div>
    </div>
    <div class="row">

        <div class="col-sm-4 col-sm-offset-2">
            <t:pagelink page="index" class="btn btn-default">${message:go-home}</t:pagelink>
        </div>

    </div>

    <p:else>
        <div class="col-sm-4 col-sm-offset-2">
            <t:actionlink t:id="finish" class="btn btn-primary">${message:test-finish}</t:actionlink>
        </div>
    </p:else>
</t:if>


</html>